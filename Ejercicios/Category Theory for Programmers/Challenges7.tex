\documentclass[11pt]{article}
%Gummi|065|=)
\usepackage[utf8x]{inputenc}
\usepackage[margin=1in]{geometry} 
\usepackage{amsmath,amsthm,amssymb}
\usepackage[spanish]{babel}
\usepackage{mathpazo}
\usepackage{verbatim}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{babel}
\SetUnicodeOption{mathletters}
\SetUnicodeOption{autogenerated}
\setlength\parindent{0pt}

\usepackage{listings}
\usepackage{xcolor}
\lstset { %
    language=C++,
    backgroundcolor=\color{black!5},
    basicstyle=\footnotesize,
}

\usepackage{amsmath}
\begin{document}
\begin{enumerate}
\item \textit{Can we turn the \texttt{Maybe} type constructor into a functor by defining:}

\begin{verbatim}
fmap _ _ = Nothing
\end{verbatim}

\textit{which ignores both of its arguments?}

No, obsérvese que \texttt{fmap id (Just x) $\neq$ Just x}, luego esta implementación de \texttt{fmap} no podría ser parte del functor.

\item \textit{Prove functor laws for the reader functor.}

\begin{verbatim}
  fmap id f
= { definition of fmap }
  id . f
= { definition of id }
  f
= { definition of id }
  id f
\end{verbatim}

\begin{verbatim}
  fmap (f . g) h
= { definition of fmap }
  (f . g) . f
= { associativity of (.) }
  f . (g . f)
= { definition of fmap }
  f . (fmap g f)
= { definition of fmap }
  fmap g (fmap g f)
= { definition of (.) }
  (fmap g . fmap g) f
\end{verbatim}

\item \textit{Implement the reader functor in your second favorite language}

\begin{lstlisting}
template<class R, class B>
struct Reader {
	std::function<B(R)> fun;
	Reader(std::function<B(R)> f) : fun(f) {}
};

template<class A, class B, class R>
Reader<R,B> fmap(std::function<B(A)>f, Reader<R,A> g) {
	std::function<B(R)> h = [&](R r) {
		return f(g.fun(r));
	};
	return Reader<R,B>(h);
}
\end{lstlisting}

\item \textit{Prove the functor laws for the list functor. Assume the laws are true for the tail part of the list you're applying it to.}

\begin{verbatim}
  fmap id (x : xs)
= { definition of fmap }
  (id x : fmap id xs)
= { definition of id }
  (x : fmap id xs)
= { induction hypothesis }
  (x : id xs)
= { definition of id }
  (x : xs)
= { definition of id }
  id (x : xs)
\end{verbatim}

\begin{verbatim}
  fmap (f . g) (x : xs)
= { definition of fmap }
  ((f . g) x : fmap (f . g) xs)
= { induction hypothesis }
  ((f . g) x : (fmap f . fmap g) xs)
= { definition of (.) }
  (f (g x) : (fmap f . fmap g) xs)
= { definition of (.) }
  (f (g x) : fmap f (fmap g xs))
= { definition of fmap }
  fmap f (g x : fmap g xs)
= { definition of fmap }
  fmap f (fmap g (x : xs))
= { definition of (.) }
  (fmap g . fmap g) (x : xs)
\end{verbatim}
\end{enumerate}
\end{document}
